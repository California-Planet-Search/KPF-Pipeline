# Pipeline logger configurations
[LOGGER]
start_log = True
log_path = pipeline.log
log_level = info
log_verbose = True

[ARGUMENT]
data_type = KPF
output_dir = ./test_results/kpf_04122022/
output_dir_flat = ./test_results/kpf_04122022/

input_dir = ./test_data/kpf/ait/red/20220412/L0/
input_dir_flat = ./test_data/kpf/ait/red/20220412/L0/
input_flat_file_pattern = KP.20220412.45046.00.fits
input_lev0_file_prefix = KP.20220412.*.00.fits

output_trace = output_trace/
output_extraction = output_extraction/
output_rv = output_rv/
output_clip = clip_np/
output_barycorr = output_barycorr/
output_hk = output_cahk/

output_flat_suffix = _L0
output_lev1_suffix = _L1
output_lev2_suffix = _L2
ccd_list = ['GREEN_CCD', 'RED_CCD']

# for order trace
fitting_poly_degree = 3
data_row_range = None
data_col_range = None
ccd_idx = [0, 1]

# for spectral extraction
max_result_order = -1
start_result_order = 0
start_order = [0, 0]

rectification_method = norect
#rectification_method = vertical
extraction_method = summ
#orderlet_names = [['GREEN_SKY_FLUX', 'GREEN_SCI_FLUX1', 'GREEN_SCI_FLUX2', 'GREEN_SCI_FLUX3', 'GREEN_CAL_FLUX'], ['RED_SKY_FLUX', 'RED_SCI_FLUX1', 'RED_SCI_FLUX2', 'RED_SCI_FLUX3', 'RED_CAL_FLUX']]

orderlet_names = [['GREEN_SCI_FLUX1'], ['RED_SCI_FLUX1']]
wave_fits = [None, None]
wave_from_lev1 = [False, False]

# for rv
# orderlet_names_rv = [['GREEN_SCI_FLUX1', 'GREEN_SCI_FLUX2', 'GREEN_SCI_FLUX3'], ['RED_SCI_FLUX1', 'RED_SCI_FLUX2', 'RED_SCI_FLUX3']]
orderlet_names_rv = [['GREEN_SCI_FLUX1', 'GREEN_SCI_FLUX2', 'GREEN_SCI_FLUX3']]
reweighting_method = ccf_max
ccf_ext = ['GREEN_CCF', 'RED_CCF']
rv_ext = RV

[MODULE_CONFIGS]
order_trace = modules/order_trace/configs/default_recipe_kpf_20220412_red.cfg
spectral_extraction = modules/spectral_extraction/configs/default_recipe_kpf.cfg
#radial_velocity = modules/radial_velocity/configs/default_recipe_kpf.cfg
#hk_spectral_extraction = modules/ca_hk/configs/default_hk.cfg

